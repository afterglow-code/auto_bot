# 📊 auto_bot 투자 전략 및 운용 가이드

`auto_bot` 디렉토리 내에 구현된 주요 투자 전략과 시스템 운용 방식에 대한 기술 문서입니다.

## 1. 주요 투자 전략 (Strategies)

### 🇰🇷 한국 ETF 가중 모멘텀 (`1m_auto_bot_upload_etf.py`)
*   **투자 대상:** 국내 상장 ETF (시가총액 상위, 레버리지/인버스 제외)
*   **로직:** **순수 가중 모멘텀 (Weighted Momentum)**
    *   1개월(20일), 3개월(60일), 6개월(120일) 수익률에 가중치를 부여하여 합산 점수 산출
*   **마켓 타이밍:** 코스피 지수 60일 이동평균선 기반
    *   **상승장:** 지수 > 60일선 (공격 자산 위주 포트폴리오)
    *   **하락장:** 지수 < 60일선 (인버스 또는 단기 채권 등 방어 자산)
*   **특징:** 시장의 추세를 추종하며 자산 배분 효과를 노림

### 🇰🇷 한국 개별주 변동성 조절 모멘텀 (`1m_auto_bot_upload_stock.py`)
*   **투자 대상:** 코스피/코스닥 시가총액 상위 종목 (KOSPI 200 + KOSDAQ 150 수준)
*   **로직:** **위험 조정 수익률 (Risk-Adjusted Momentum)** 방식
    *   수익률(3개월, 6개월 평균)을 **최근 60일 변동성(표준편차)**으로 나누어 점수 산출
    *   노이즈가 적고 견고하게 우상향하는 종목에 높은 가점 부여
*   **특징:** 변동성이 낮으면서 탄력이 좋은 주도주 포착에 최적화

### 🇺🇸 미국 주식 가중 모멘텀 전략 (`1m_auto_bot_upload_US.py`)
*   **투자 대상:** S&P 500 전종목 및 NASDAQ 시가총액 상위 100종목 (유니버스 약 550개)
*   **로직:** **가중 평균 모멘텀 (Weighted Momentum)**
    *   1개월(20일), 3개월(60일), 6개월(120일) 수익률에 가중치 부여
    *   **마켓 타이밍:** S&P 500 지수(SPY)의 60일 이동평균선 기반 (상승/중립/하락장 구분 운용)
*   **특징:** 대형주 중심의 강한 모멘텀 종목을 선별하며, 시장 상황에 따라 현금(BIL) 비중을 동적으로 조절

### 📉 나스닥 퀀트 마스터 (`NASDAQ_strategy.py`)
*   **투자 대상:** QQQ, TQQQ, QQQM (나스닥 지수 추종 상품)
*   **로직:** 4단계 필터링 시스템
    1.  **Supertrend:** 추세 방향 확인 (상승/하락)
    2.  **SMA 200:** 장기 이평선 위에서만 공격적 투자
    3.  **MACD:** 단기 모멘텀의 살아있음 확인
    4.  **RSI:** 시장 강도가 특정 기준(46.0) 이상인지 확인
*   **포지션:** 조건 충족 시 **TQQQ (3배 레버리지)**, 미충족 시 **QQQM (1배 저비용)** 운용

### 🚀 모멘텀 돌파 스캐너 (MOSIG Hybrid 3.0) (`mosig_bot.py`, `mosig_us.py`)
*   **투자 대상:** 한국(KOSPI/KOSDAQ) 및 미국(S&P 500) 전종목
*   **매수 조건:** 
    *   **가격 모멘텀:** 10일 가격 모멘텀이 시그널선(9일 평균)을 골든크로스 돌파
    *   **거래량 급증:** 당일 거래량이 **최근 20일 평균 거래량 대비 200% 이상** 급증 (Volume Spike)
*   **출구 전략:** 
    *   **익절:** ATR(20일)의 3.0배수 적용 (변동성 기반 동적 익절)
    *   **손절:** 진입가 대비 -5% 고정 손절 적용

### 🌍 글로벌 가속 모멘텀 스캐너 (`daily_global_screener.py`)
*   **분석 범위:** 한국 전시장 및 미국 S&P 500
*   **특징:** 
    *   미국 시장: 20일, 60일, 120일 가중 모멘텀 적용
    *   한국 시장: 60일, 120일 수익률을 60일 변동성으로 나눈 위험 조정 점수 산출
    *   멀티스레딩 및 지수 백오프 기반의 안정적인 데이터 수집 엔진 탑재

---

## 2. 시스템 운용 방법 (Operations)

### 통합 리포팅 (`total_daily_report.py`)
*   **자동 실행 순서:** 한국 ETF → 한국 개별주 → 미국 주식 → MOSIG 스캔 순으로 자동 실행
*   **텔레그램 연동:** 분석된 최종 결과를 HTML/Markdown 형식으로 요약하여 텔레그램 채널로 발송
*   **시장 상황 요약:** 각 시장별로 '상승장(🔴)', '중립장(🟠)', '하락장(🔵)' 이모지를 통해 직관적인 시장 분위기 전달

### 데이터 및 성능 최적화
*   **공통 모듈 (`common.py`):** 병렬 데이터 수집(`fetch_data_in_parallel`), 텔레그램 발송(`send_telegram`) 등 핵심 유틸리티 집약
*   **설정 관리 (`config.py`):** 종목 필터링 기준, 가중치, 텔레그램 채널 ID 등 핵심 파라미터 통합 관리
*   **API 안정성:** `time.sleep` 랜덤 지연 및 지수 백오프(Exponential Backoff) 재시도 로직을 통해 금융 데이터 API 차단 방지
